{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2024-05-09 15:03:28.579889",
 "css": "* {\n    font-family : Helvetica Word;\n}\n.print-heading {\n    display : none;\n}\n.page-header {\n    margin : 0px !important;\n    padding : 0px !important;\n    position : fixed;\n    top : 0;\n    width : 100%;\n}\n.letter-head {\n    margin : 0px !important;\n}\n.page-footer {\n    position : fixed;\n    bottom : 0;\n    width : 100%;\n}\n.text-center {\n    display : none;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Delivery Note",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field -%}\n\n{% set customer_data = frappe.db.get_list(\"Address\", filters={\"name\": doc.customer_address}, fields=[\"*\"]) %}\n{% set fetch_e_Waybill_Log_data = frappe.db.get_list(\"e-Waybill Log\", filters={\"reference_name\": doc.name},\nfields=[\"*\"]) %}\n{% set total_qty = doc.items | map(attribute='qty') | sum %}\n{% macro display_data(data) %} {% if data is not none %} {{ data }} {% endif %} {% endmacro %}\n\n{% set aggregated_data = {} %}\n{% for row in doc.items %}\n{% set fetching_parent_items_dets = frappe.db.get_list(\"Item\", filters={\"item_code\": row.item_code},\nfields=[\"variant_of\"]) %}\n{% for parent_data in fetching_parent_items_dets %}\n{% set parent_items_dets = frappe.db.get_list(\"Item\", filters={\"name\": parent_data.variant_of},\nfields=[\"custom_product_name\", \"brand\", \"gst_hsn_code\", \"stock_uom\"]) %}\n{% for data in parent_items_dets %}\n{% set custom_mrp = row.custom_custom_mrp %}\n{% set product_name = data.custom_product_name %}\n{% set brand = data.brand %}\n{% set gst_hsn_code = data.gst_hsn_code %}\n{% set uom = data.stock_uom %}\n{% set key = (custom_mrp, product_name, brand) %}\n{% if key not in aggregated_data %}\n{% set _ = aggregated_data.update({key: {'custom_mrp': custom_mrp, 'product_name': product_name, 'brand': brand, 'qty':\nrow.qty, 'total': row.amount, 'hsn_code': gst_hsn_code, 'uom': uom}}) %}\n{% else %}\n{% set current_data = aggregated_data[key] %}\n{% set new_qty = current_data.qty + row.qty %}\n{% set new_amt = current_data.total + row.amount %}\n{% set _ = aggregated_data[key].update({'qty': new_qty, 'total': new_amt}) %}\n{% endif %}\n{% endfor %}\n{% endfor %}\n{% endfor %}\n{% set finale_list = aggregated_data.values() | list %}\n\n<div class=\"page-header\">\n   {{ add_header(0, 1, doc, letter_head, no_letterhead) }}\n</div>\n\n{% set rows_per_page = 28 %}\n{% set hsn_page_rows = 22 %}\n{% set num_items = finale_list | length %}\n\n{% if num_items <= rows_per_page %} {% set first_page_items=num_items %} {% set second_page_items=0 %} {% set\n   num_full_pages=1 %} {% else %} {% set first_page_items=min(rows_per_page, num_items) %} {% set\n   second_page_items=max(0, num_items - rows_per_page) %} {% set num_full_pages=1 + (second_page_items> 0) +\n   (second_page_items > hsn_page_rows) %}\n   {% endif %}\n\n   <table style=\"width: 100%; margin-top: 265px;\">\n      <tbody style=\"border-left: 1px solid black;\">\n         <tr style=\"border: 1px solid black;\">\n            <th\n               style=\"border: 1px solid black; width: 4%; color: black; text-align: left; padding: 2px !important; font-size: 11px;\">\n               S N</th>\n            <th\n               style=\"border: 1px solid black; color: black; width: 55%; text-align: left; padding: 2px !important; font-size: 11px;\">\n               Description of Goods</th>\n            <th\n               style=\"border: 1px solid black; color: black; width: 8%; text-align: left; padding: 2px !important; font-size: 11px;\">\n               HSN/SAC</th>\n            <th\n               style=\"border: 1px solid black; color: black; width: 5%; text-align: left; padding: 2px !important; font-size: 11px;\">\n               QTY</th>\n            <th\n               style=\"border: 1px solid black; color: black; width: 5%; text-align: left; padding: 2px !important; font-size: 11px;\">\n               Unit</th>\n            <th\n               style=\"border: 1px solid black; color: black; text-align: left; width: 10.5%; padding: 2px !important; font-size: 11px;\">\n               Price</th>\n            <th\n               style=\"border: 1px solid black; color: black; text-align: right; width: 22.5%; padding: 2px !important; font-size: 11px;\">\n               Amount</th>\n         </tr>\n         {% for i in range(first_page_items) %}\n         <tr>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">{{ i + 1 }}</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">{{\n               display_data(finale_list[i].product_name) }} {{ display_data(finale_list[i].brand) }}</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">{{\n               display_data(finale_list[i].hsn_code) }}</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">{{\n               display_data(finale_list[i].qty) }}</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">{{\n               display_data(finale_list[i].uom) }}</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">{{\n               display_data(finale_list[i].custom_mrp) }}</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important; text-align: right;\">{{\n               display_data(finale_list[i].total) }}</td>\n         </tr>\n         {% endfor %}\n         {% if first_page_items < hsn_page_rows %} {% for i in range(first_page_items, hsn_page_rows) %} <tr>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">&nbsp;</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">&nbsp;</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">&nbsp;</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">&nbsp;</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">&nbsp;</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">&nbsp;</td>\n            <td style=\"font-size: 11px; border-right: 1px solid black; padding: 3px !important\">&nbsp;</td>\n            </tr>\n            {% endfor %}\n            {% endif %}\n      </tbody>\n      {% if finale_list | length <= 22 %} <tfoot>\n         <tbody style=\"border: 1px solid black;\">\n            <tr>\n               <td colspan=\"4\"\n                  style=\"text-align: right; padding-right: 10px; font-size: 11px; padding: 3px !important;\">{{\n                  display_data(total_qty) }}</td>\n               <td colspan=\"2\" style=\"text-align: center; font-size: 11px; padding: 3px !important;\">Sub Total</td>\n               <td style=\"font-size: 11px; text-align: right; padding: 3px !important;\">{{ display_data(doc.total) }}\n               </td>\n            </tr>\n            <tr>\n               <td colspan=\"6\" style=\"font-size: 11px; padding: 3px !important;\">\n                  <div style=\"display: flex; flex-direction: column\">\n                     <div style=\"padding-left: 370px\">Discount &nbsp; &nbsp; &nbsp; @ {% if\n                        doc.additional_discount_percentage != 0.0 %}% {{ doc.additional_discount_percentage }} {% endif\n                        %}</div>\n                     {% for tax_data in doc.taxes %}\n                     <div style=\"padding-left: 370px\">{{ display_data(tax_data.description) }} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; @ {{\n                        display_data(tax_data.rate) }} %</div>\n                     {% endfor %}\n                     <div style=\"padding-left: 370px\">Rounded Off(+)</div>\n                  </div>\n               </td>\n               <td style=\"font-size: 11px; padding: 3px !important;\">\n                  <div style=\"text-align: right;\">{{ doc.discount_amount or \"0.0\" }}</div>\n                  <div style=\"text-align: right;\">{{ display_data(doc.total_taxes_and_charges) }}</div>\n                  <div style=\"text-align: right;\">{{ doc.rounding_adjustment or \"0.0\" }}</div>\n               </td>\n            </tr>\n            <tr style=\"border-top : 1px solid black\">\n               <td colspan=\"6\" style=\"padding : 5px !important\">\n                  <div style=\"width: 100%; display: flex; justify-content: space-between;\">\n                     <div>\n                        <b style=\"font-size: 11px;\">{{ display_data(doc.in_words) }}</b>\n                     </div>\n                     <div>\n                        <b style=\"font-size: 11px;\">GRAND TOTAL</b>\n                     </div>\n                  </div>\n               </td>\n               <td style=\"text-align: right; font-size: 11px; padding : 5px !important; font-weight :700\">\n                  {{ display_data(doc.rounded_total) }}\n               </td>\n            </tr>\n         </tbody>\n         </tfoot>\n         {% endif %}\n   </table>\n\n   {% if finale_list | length > 22 %}\n   <table>\n      <tfoot>\n         <tbody style=\"border: 1px solid black;\">\n            <tr>\n               <td colspan=\"4\"\n                  style=\"text-align: right; padding-right: 10px; font-size: 11px; padding: 3px !important;\">{{\n                  display_data(total_qty) }}</td>\n               <td colspan=\"2\" style=\"text-align: center; font-size: 11px; padding: 3px !important;\">Sub Total</td>\n               <td style=\"font-size: 11px; text-align: right; padding: 3px !important;\">{{ display_data(doc.total) }}\n               </td>\n            </tr>\n            <tr>\n               <td colspan=\"6\" style=\"font-size: 11px; padding: 3px !important;\">\n                  <div style=\"display: flex; flex-direction: column\">\n                     <div style=\"padding-left: 370px\">Discount &nbsp; &nbsp; &nbsp; @ {% if\n                        doc.additional_discount_percentage != 0.0 %} {{ doc.additional_discount_percentage }}% {% endif\n                        %} </div>\n                     {% for tax_data in doc.taxes %}\n                     <div style=\"padding-left: 370px\">{{ display_data(tax_data.description) }} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; @ {{\n                        display_data(tax_data.rate) }} %</div>\n                     {% endfor %}\n                     <div style=\"padding-left: 370px\">Rounded Off(+)</div>\n                  </div>\n               </td>\n               <td style=\"font-size: 11px; padding: 3px !important;\">\n                  <div style=\"text-align: right;\">{{ doc.discount_amount or \"0.0\" }}</div>\n                  <div style=\"text-align: right;\">{{ display_data(doc.total_taxes_and_charges) }}</div>\n                  <div style=\"text-align: right;\">{{ doc.rounding_adjustment or \"0.0\" }}</div>\n               </td>\n            </tr>\n            <tr style=\"border-top : 1px solid black\">\n               <td colspan=\"6\" style=\"padding : 5px !important\">\n                  <div style=\"width: 100%; display: flex; justify-content: space-between;\">\n                     <div>\n                        <b style=\"font-size: 11px;\">{{ display_data(doc.in_words) }}</b>\n                     </div>\n                     <div>\n                        <b style=\"font-size: 11px;\">GRAND TOTAL</b>\n                     </div>\n                  </div>\n               </td>\n               <td style=\"text-align: right; font-size: 11px; padding : 5px !important; font-weight :700\">\n                  {{ display_data(doc.rounded_total) }}\n               </td>\n            </tr>\n         </tbody>\n      </tfoot>\n   </table>\n   {% endif %}\n   <!-- Page Footer Section -->\n   <div class=\"page-footer\">{{footer}}</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2024-06-28 11:12:30.736098",
 "modified_by": "Administrator",
 "module": "Mezzo Apparels",
 "name": "Delivery Note",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}