{
 "_liked_by": "[\"Administrator\"]",
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2024-05-08 12:22:48.544249",
 "css": "/* Hide the print heading in the print view */\n.print-heading {\n    display: none;\n}\n\n/* Define height for page header and page header space */\n.page-header,\n.page-header-space {\n    height: 150px;\n}\n\n/* Define height for page footer and page footer space */\n.page-footer,\n.page-footer-space {\n    height: 126px;\n}\n\n/* Styling for the fixed page footer */\n.page-footer {\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n    margin: auto;\n}\n\n/* Apply a page break before an element with class 'page-break-before' */\n.page-break-before {\n    page-break-before: always;\n}\n\n/* Styling for the fixed page header */\n.page-header {\n    position: fixed;\n    top: 0mm;\n    display: block;\n    width: 100%;\n    border-bottom: 0 !important;\n    /* Remove bottom border */\n    color: #ffffff;\n    /* Text color */\n    margin-left: 0px !important;\n    padding-left: 0 !important;\n}\n\n/* Adjust padding for print format preview in a specific context */\n.print-format .print-format-preview {\n    padding-left: 0px !important;\n}\n\n/* Define page size and margins for printing */\n@page {\n    size: A4 portrait;\n    /* Set page size to A4 in portrait orientation */\n    margin: 10mm;\n    /* Set margin to 10mm */\n    margin-bottom: 55px;\n    /* Set bottom margin to 55px */\n}\n\n/* Media query for print styles */\n@media print {\n    thead {\n        display: table-header-group;\n    }\n\n    /* Display table header in print view */\n    tfoot {\n        display: table-footer-group;\n    }\n\n    /* Display table footer in print view */\n\n    /* Adjust height for page header and page header space in print view */\n    .page-header,\n    .page-header-space {\n        height: 429px;\n        border-bottom: 0 !important;\n        /* Remove bottom border */\n    }\n\n    /* Adjust height for page footer and page footer space in print view */\n    .page-header,\n    .page-footer-space {\n        height: 0px;\n    }\n\n    /* Apply page break before specific elements in print view */\n    .page-break-before {\n        page-break-before: always;\n    }\n\n    /* Display page header in print view */\n    .page-header {\n        display: block;\n    }\n\n    /* Adjust padding for print format preview in print view */\n    .print-format .print-format-preview {\n        padding-left: 0px !important;\n        padding-top: 0px !important;\n    }\n\n    /* Hide buttons in print view */\n    button {\n        display: none;\n    }\n\n    /* Set body margin to 0 in print view */\n    body {\n        margin: 0;\n    }\n}\n\n/* Adjust margin for the page header */\n.page-header {\n    margin-top: 0px !important;\n}\n\n/* Hide a specific element in print view */\n.text-center h4 {\n    display: none;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header,\nrender_field -%}\n\n{% macro display_data(data) %}\n    {% if data is not none %}\n        {{ data }}\n    {% endif %}\n{% endmacro %}\n\n{% set grouped_items = {} %}\n{% for item in doc.items %}\n    {% set rate_key = item.custom_mrpprice_list %}\n    {% if rate_key not in grouped_items %}\n        {% set _ = grouped_items.update({ rate_key: {'custom_mrpprice_list': item.custom_mrpprice_list, 'price_list_rate': item.price_list_rate, 'gst_hsn_code': item.gst_hsn_code, 'stock_uom': item.stock_uom, 'items': [{'item_code': item.item_code, 'item_name': item.item_name, 'qty': item.qty, 'amount': item.amount}]}}) %}\n    {% else %}\n        {% set _ = grouped_items[rate_key]['items'].append({'item_code': item.item_code, 'item_name': item.item_name, 'qty': item.qty, 'amount': item.amount}) %}\n    {% endif %}\n{% endfor %}\n\n{% set final_list = [] %}\n{%- for rate_key, data in grouped_items.items() %}\n    {%- if data['items'][0].item_code != 'Total' %}\n        {%- set total_qty = data['items']|map(attribute='qty')|sum %}\n        {%- set total_amount = data['items']|map(attribute='amount')|sum %}\n        {%- set _ = final_list.append({'custom_mrpprice_list': data.custom_mrpprice_list, 'price_list_rate': data.price_list_rate, 'gst_hsn_code': data.gst_hsn_code, 'stock_uom': data.stock_uom, 'item_code': data['items'][0].item_code, 'item_name': data['items'][0].item_name, 'qty': total_qty, 'amount': total_amount}) %}\n    {%- endif %}\n{%- endfor %}\n\n<!--{{ final_list }}-->\n\n\n\n\n\n{% set company_bank_details = frappe.db.get_list(\"Bank Account\", filters={\"company\" : doc.company} , fields=[\"*\"]) %}\n{% set variant_totals = {} %}\n{% set variant_gst_hsn = {} %}\n{% set variant_stock_uom = {} %}\n{% set variant_prices = {} %}\n{% set variant_sizes = {} %}\n\n{% for row in doc.items %}\n    {% set item_data = frappe.get_doc(\"Item\", row.item_code, fields=[\"*\"]) %}\n    {% set variant_of = item_data.variant_of %}\n    {% set gst_hsn_code = row.gst_hsn_code %}\n    {% set uom = item_data.stock_uom %}\n    \n    {% if variant_of not in variant_totals %}\n        {% set dummy = variant_totals.update({variant_of: 0}) %}\n        {% set dummy = variant_gst_hsn.update({variant_of: set()}) %}\n        {% set dummy = variant_stock_uom.update({variant_of: set()}) %}\n        {% set dummy = variant_prices.update({variant_of: {\n            \"Total Qty\": 0,\n            \"Total Price List Rate\": 0,\n            \"Total Rate\": 0,\n            \"Total Base Amount\": 0,\n            \"GST HSN Codes\": set(),\n            \"UOM\": set()\n        }}) %}\n        {% set dummy = variant_sizes.update({variant_of: set()}) %}\n    {% endif %}\n    \n    {% set dummy = variant_totals.update({variant_of: variant_totals.get(variant_of, 0) + row.qty}) %}\n    {% set dummy = variant_gst_hsn[variant_of].add(gst_hsn_code) %}\n    {% set dummy = variant_stock_uom[variant_of].add(uom) %}\n    {% set dummy = variant_prices[variant_of].update({\n        \"Total Qty\": variant_prices[variant_of].get(\"Total Qty\", 0) + row.qty,\n        \"Total Price List Rate\": variant_prices[variant_of].get(\"Total Price List Rate\", 0) + row.price_list_rate,\n        \"Total Rate\": variant_prices[variant_of].get(\"Total Rate\", 0) + row.rate,\n        \"Total Base Amount\": variant_prices[variant_of].get(\"Total Base Amount\", 0) + row.base_amount,\n        \"GST HSN Codes\": variant_gst_hsn[variant_of] if variant_gst_hsn[variant_of] is not none else set(),\n        \"UOM\": variant_stock_uom[variant_of] if variant_stock_uom[variant_of] is not none else set()\n    }) %}\n    \n    {# Extracting sizes #}\n    {% for attr in item_data.attributes %}\n        {% if attr.attribute == \"Size\" %}\n            {% set dummy = variant_sizes[variant_of].add(attr.attribute_value) %}\n        {% endif %}\n    {% endfor %}\n{% endfor %}\n\n{% set variant_list = [] %}\n{% for variant, data in variant_prices.items() %}\n    {% set variant_dict = {\n        \"Variant_Of\": variant, \n        \"Total_Qty\": data[\"Total Qty\"], \n        \"GST_HSN_Codes\": \", \".join(list(data[\"GST HSN Codes\"])),\n        \"UOM\": \", \".join(list(data[\"UOM\"])),\n        \"Price_List_Rate\": data[\"Total Price List Rate\"],\n        \"Rate\": data[\"Total Rate\"],\n        \"Base_Amount\": data[\"Total Base Amount\"],\n        \"Sizes\": \", \".join(list(variant_sizes[variant]))  \n    } %}\n    {% set dummy = variant_list.append(variant_dict) %}\n{% endfor %}\n\n\n\n<!-- Outer container for the print format with some styling -->\n<div class=\"print-format .print-format-preview\" style=\"padding-left: 0px\">\n  <!-- Page Header Section -->\n  <div class=\"page-header\">\n    {{ add_header(0, 1, doc, letter_head, no_letterhead ) }}\n  </div>\n\n  <!-- Page Footer Section -->\n  <!--<div class=\"page-footer\">{{footer}}</div>-->\n\n  <!-- Table for the entire print format -->\n  <!-- Table for the entire print format -->\n    <table>\n        <!-- Table Header Section -->\n        <thead>\n            <tr>\n                <th>\n                    <!-- Placeholder for the fixed-position header -->\n                    <div class=\"page-header-space\"></div>\n                </th>\n            </tr>\n            <tr>\n                <th style=\"border: 1px solid black; width: 8%; color: black; text-align: left; font-weight : bold;\">Sr No.</th>\n                <th style=\"border: 1px solid black; color: black; width: 100%; text-align: left; font-weight : bold;\">Description of Goods</th>\n                <th style=\"border: 1px solid black; color: black; width: 10%; text-align: left; font-weight : bold;\">HSN Code</th>\n                <th style=\"border: 1px solid black; color: black; width: 5%; text-align: left; font-weight : bold;\">Qty</th>\n                <th style=\"border: 1px solid black; color: black; width: 5%; text-align: left; font-weight : bold;\">Unit</th>\n                <th style=\"border: 1px solid black; color: black; text-align: left; width: 12.5%; font-weight : bold;\">MRP</th>\n                <th style=\"border: 1px solid black; color: black; text-align: left; width: 12.5%; font-weight : bold;\">Rate</th>\n                <th style=\"border: 1px solid black; color: black; text-align: left; width: 22.5%; padding-right : 30px !important; font-weight : bold;\">Amount</th>\n            </tr>\n        </thead>\n    \n        <!-- Table Body Section -->\n        <tbody style=\"border-bottom: 1px solid black;\">\n            {% for i in range(1, final_list|length + 1) %}\n                {% if i % 7 == 0 %}\n                    </tbody>\n                    </table>\n                    <!-- Placeholder for the fixed-position footer -->\n                    <div class=\"page-footer-space\"></div>\n                    <!-- Page break -->\n                    <div class=\"page-break\"></div>\n                    <table>\n                    <thead>\n                        <tr>\n                            <th>\n                                <!-- Placeholder for the fixed-position header -->\n                                <div class=\"page-header-space\"></div>\n                            </th>\n                        </tr>\n                        <tr>\n                            <th style=\"border: 1px solid black; width: 8%; color: black; text-align: left;\">Sr No.</th>\n                            <th style=\"border: 1px solid black; color: black; width: 50%; text-align: left;\">Description of Goods</th>\n                            <th style=\"border: 1px solid black; color: black; width: 15%; text-align: left;\">HSN Code</th>\n                            <th style=\"border: 1px solid black; color: black; width: 5%; text-align: left;\">Qty</th>\n                            <th style=\"border: 1px solid black; color: black; width: 5%; text-align: left;\">Unit</th>\n                            <th style=\"border: 1px solid black; color: black; text-align: left; width: 12.5%;\">MRP</th>\n                            <th style=\"border: 1px solid black; color: black; text-align: left; width: 12.5%;\">Rate</th>\n                            <th style=\"border: 1px solid black; color: black; text-align: left; width: 22.5%; padding-right: 30px !important;\">Amount</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                {% endif %}\n                <tr>\n                    <td style=\"border-right: 1px solid black; border-left: 1px solid black; width: 15%; color: black; text-align: left;\">{{ i }}</td>\n                    {% set item_details = frappe.db.get_list(\"Item\", filters={\"item_name\": final_list[i-1].item_name}, fields=[\"*\"]) %}\n                    {% for data in item_details %}\n                        <td style=\"border-right: 1px solid black; color: black; width: 30.5%; text-align: left;\">{{ display_data(data.custom_product_name) }}</td>\n                    {% endfor %}\n                    <td style=\"border-right: 1px solid black; color: black; width: 35%; text-align: left;\">{{ display_data(final_list[i-1].gst_hsn_code) }}</td>\n                    <td style=\"border-right: 1px solid black; color: black; width: 19%; text-align: left;\">{{ display_data(final_list[i-1].qty) }}</td>\n                    <td style=\"border-right: 1px solid black; color: black; width: 15%; text-align: left;\">{{ display_data(final_list[i-1].stock_uom) }}</td>\n                    <td style=\"border-right: 1px solid black; color: black; text-align: left; width: 25%;\">{{ display_data(final_list[i-1].custom_mrpprice_list) }}</td>\n                    <td style=\"border-right: 1px solid black; color: black; text-align: left; width: 25%;\">{{ display_data(final_list[i-1].price_list_rate) }}</td>\n                    <td style=\"border-right: 1px solid black; color: black; text-align: left; width: 25%;\">{{ display_data(final_list[i-1].amount) }}</td>\n                </tr>\n            {% endfor %}\n        </tbody>\n\n    <!-- Table Footer Section -->\n    <tfoot>\n      <tr>\n        <td>\n          <!-- Placeholder for the fixed-position footer -->\n          <div class=\"page-footer-space\"></div>\n        </td>\n      </tr>\n      <tbody>\n            <tr>\n                <td style=\"border: 1px solid black; width: 9%; color: black; text-align: left;\" colspan=\"7\">\n\n                        <div style = \"display : flex; flex-direction : column;\">\n                            <div style =\" text-align : right\">\n                                Sub Total :\n                            </div>\n                            {% for data in doc.taxes %}\n                                <div style = \"text-align : right;\">\n                                    Add : {{display_data(data.description)}} @ {{display_data(data.rate)}} : <br/>\n                                    Discount @ {{display_data(doc.additional_discount_percentage)}}%\n                                </div>\n                            {% endfor %}\n                        </div>\n\n                </td>\n                <td style=\"border: 1px solid black; color: black; width: 10.5%; text-align: left;\" colspan=\"1\">\n                    <div style = \"display : flex; flex-direction : column;\">\n                            <div>\n                                {{display_data(doc.total)}}\n                            </div>\n                            {% for data in doc.taxes %}\n                                <div>\n                                    {{display_data(data.base_tax_amount)}}\n                                </div>\n                            {% endfor %}\n                            <div>\n                                {{display_data(doc.discount_amount)}}\n                            </div>\n                        </div>\n                </td>\n\n            </tr>\n            <tr>\n                <td colspan=\"7\" style =\"border: 1px solid black; color:\">\n                    <div style = \"display : flex; justify-content : space-between;\">\n                        <div>\n                            {{display_data(doc.in_words)}}<br/>\n                            <strong>Notes</strong> : <span>{{display_data(doc.remarks)}}</span>\n                        </div>\n                        <div>\n                            <strong>Grand Total :</strong>\n                        </div>\n                    </div>\n                </td>\n                <td colspan=\"1\" style =\"border: 1px solid black; color:\">\n                    {{display_data(doc.rounded_total)}}\n                </td>\n            </tr>\n            <tr>\n                <td colspan=\"5\" style = \"border : 1px solid black; padding : 0\">\n                    <div style = \"min-height : 70px;\">\n                        <u><strong>Terms & Conditions</strong></u><br/>\n                        {{display_data(doc.terms)}}\n                    </div>\n                </td>\n                <td colspan=\"3\" style = \"border : 1px solid black;\">\n                    {% set fetching_acct_details = frappe.db.get_list(\"Bank Account\", filters = {\"company\" : doc.company}, fields = [\"*\"]) %}\n                    {% for data in fetching_acct_details %}\n                        {{display_data(data.bank)}} bank<br>\n                        A/c No. {{display_data(data.bank_account_no)}}<br>\n                        IFSC Code : {{display_data(data.branch_code)}}\n                    {% endfor %}\n                </td>\n            </tr>\n            <tr>\n                <td colspan=\"8\" style = \"padding : 0px !important; border : 1px solid black;\">\n                    <div style = \"display : flex;\">\n                        <div style = \"width : 25%; border-right : 1px solid black; margin : 2px; height : 45px; text-align : center;\">\n                            Receiver`s Signature\n                        </div>\n                        <div style = \"width : 25%; border-right : 1px solid black; margin : 2px; height : 45px; text-align : center;\">\n                            Checked By\n                        </div>\n                        <div style = \"width : 25%; border-right : 1px solid black; margin : 2px; height : 45px; text-align : center;\">\n                            Prepared By\n                            <br>\n                            {% set fetch_user_fullname = frappe.db.get_list(\"User\", filters={\"email\": frappe.session.user}, fields = [\"*\"]) %}\n                            {% for data in fetch_user_fullname %}\n                                {{data.full_name}}-{{display_data(doc.posting_date)}}\n                            {% endfor %}\n                        </div>\n                        <div<div style = \"width : 25%; margin-bottom : 4px; height : 45px; text-align : center; font-size : 12px; padding-bottom : 4px;\">\n                            <strong style = \"padding-top : 2px;\">for MEZZO Apparels Pvt Ltd.</strong>\n                            <br>\n                            <br>\n                            Authorized Signatory\n                            <br>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n      </tbody>\n    </tfoot>\n  </table>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2024-05-27 18:25:04.019582",
 "modified_by": "Administrator",
 "module": "Mezzo Apparels",
 "name": "Sales Invoice Format",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_designer": 0,
 "print_designer_template_app": "print_designer",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}